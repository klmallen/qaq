<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QAQæ¸¸æˆå¼•æ“ - åŸºç¡€3Dåœºæ™¯æ¼”ç¤º</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .demo-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .canvas-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        #gameCanvas {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .control-group h3 {
            margin-top: 0;
            color: #ffd700;
        }

        button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
        }

        button.success {
            background: linear-gradient(45deg, #00b894, #00a085);
        }

        .info-panel {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }

        .status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin: 5px;
        }

        .status.ready {
            background: #00b894;
        }

        .status.loading {
            background: #fdcb6e;
            color: #2d3436;
        }

        .status.error {
            background: #e17055;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffd700;
        }

        .feature h4 {
            margin-top: 0;
            color: #ffd700;
        }

        .feature ul {
            margin: 0;
            padding-left: 20px;
        }

        .feature li {
            margin: 5px 0;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .loading {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨æ ‡é¢˜ -->
        <div class="header">
            <h1>ğŸ® QAQæ¸¸æˆå¼•æ“</h1>
            <p>åŸºç¡€3Dåœºæ™¯æ¼”ç¤º - å®Œæ•´çš„åœºæ™¯ç®¡ç†å’Œ3Dæ¸²æŸ“ç³»ç»Ÿ</p>
        </div>

        <!-- å¼•æ“çŠ¶æ€ -->
        <div class="demo-section">
            <h2>ğŸš€ å¼•æ“çŠ¶æ€</h2>
            <div id="engineStatus">
                <span class="status loading">åˆå§‹åŒ–ä¸­...</span>
            </div>
            <div class="info-panel" id="statusLog">
                æ­£åœ¨åˆå§‹åŒ–QAQæ¸¸æˆå¼•æ“...
            </div>
        </div>

        <!-- 3Dæ¸²æŸ“ç”»å¸ƒ -->
        <div class="demo-section">
            <h2>ğŸ¬ 3Dåœºæ™¯æ¸²æŸ“</h2>
            <div class="canvas-container">
                <canvas id="gameCanvas" width="800" height="600"></canvas>
                <p>3Dåœºæ™¯å°†åœ¨æ­¤å¤„æ¸²æŸ“</p>
            </div>
        </div>

        <!-- åœºæ™¯æ§åˆ¶ -->
        <div class="demo-section">
            <h2>ğŸ¯ åœºæ™¯æ§åˆ¶</h2>
            <div class="controls">
                <div class="control-group">
                    <h3>åœºæ™¯ç®¡ç†</h3>
                    <button onclick="createMainScene()">åˆ›å»ºä¸»åœºæ™¯</button>
                    <button onclick="addCamera()">æ·»åŠ ç›¸æœº</button>
                    <button onclick="addMeshObject()">æ·»åŠ 3Då¯¹è±¡</button>
                </div>
                
                <div class="control-group">
                    <h3>åœºæ™¯åˆ‡æ¢</h3>
                    <button class="secondary" onclick="switchToMenuScene()">åˆ‡æ¢åˆ°èœå•</button>
                    <button class="secondary" onclick="switchToGameScene()">åˆ‡æ¢åˆ°æ¸¸æˆ</button>
                    <button class="secondary" onclick="switchToSettingsScene()">åˆ‡æ¢åˆ°è®¾ç½®</button>
                </div>
                
                <div class="control-group">
                    <h3>æ¨¡å‹åŠ è½½</h3>
                    <button class="success" onclick="loadCubeModel()">åŠ è½½ç«‹æ–¹ä½“</button>
                    <button class="success" onclick="loadSphereModel()">åŠ è½½çƒä½“</button>
                    <button class="success" onclick="loadComplexModel()">åŠ è½½å¤æ‚æ¨¡å‹</button>
                </div>
                
                <div class="control-group">
                    <h3>æ¸²æŸ“æ§åˆ¶</h3>
                    <button onclick="startRendering()">å¼€å§‹æ¸²æŸ“</button>
                    <button onclick="stopRendering()">åœæ­¢æ¸²æŸ“</button>
                    <button onclick="toggleStats()">æ˜¾ç¤ºç»Ÿè®¡</button>
                </div>
            </div>
        </div>

        <!-- åŠŸèƒ½ç‰¹æ€§ -->
        <div class="demo-section">
            <h2>âœ¨ æ ¸å¿ƒç‰¹æ€§æ¼”ç¤º</h2>
            <div class="features">
                <div class="feature">
                    <h4>ğŸ¬ åœºæ™¯ç®¡ç†ç³»ç»Ÿ</h4>
                    <ul>
                        <li>Godoté£æ ¼çš„åœºæ™¯æ¶æ„</li>
                        <li>åœºæ™¯ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
                        <li>åœºæ™¯åˆ‡æ¢å’Œè¿‡æ¸¡æ•ˆæœ</li>
                        <li>åœºæ™¯æ ˆå¯¼èˆªç³»ç»Ÿ</li>
                    </ul>
                </div>
                
                <div class="feature">
                    <h4>ğŸ“¦ èµ„æºåŠ è½½ç³»ç»Ÿ</h4>
                    <ul>
                        <li>å¤šæ ¼å¼3Dæ¨¡å‹æ”¯æŒ</li>
                        <li>å¼‚æ­¥åŠ è½½å’Œè¿›åº¦ç®¡ç†</li>
                        <li>æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ</li>
                        <li>Three.jsæ·±åº¦é›†æˆ</li>
                    </ul>
                </div>
                
                <div class="feature">
                    <h4>ğŸ¥ 3Dæ¸²æŸ“ç³»ç»Ÿ</h4>
                    <ul>
                        <li>Camera3Dé€è§†/æ­£äº¤æŠ•å½±</li>
                        <li>MeshInstance3Dç½‘æ ¼æ¸²æŸ“</li>
                        <li>Node3DèŠ‚ç‚¹æ ‘ç³»ç»Ÿ</li>
                        <li>å®Œæ•´çš„3Då˜æ¢æ”¯æŒ</li>
                    </ul>
                </div>
                
                <div class="feature">
                    <h4>ğŸ”§ Engineé›†æˆ</h4>
                    <ul>
                        <li>ç»Ÿä¸€çš„å¼•æ“æ¶æ„</li>
                        <li>æ¸²æŸ“å¾ªç¯é›†æˆ</li>
                        <li>äº‹ä»¶ç³»ç»Ÿæ”¯æŒ</li>
                        <li>æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- å®æ—¶ä¿¡æ¯ -->
        <div class="demo-section">
            <h2>ğŸ“Š å®æ—¶ä¿¡æ¯</h2>
            <div class="info-panel" id="realTimeInfo">
                ç­‰å¾…å¼•æ“åˆå§‹åŒ–...
            </div>
        </div>
    </div>

    <!-- å¼•å…¥Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- å¼•å…¥QAQæ¸¸æˆå¼•æ“æ ¸å¿ƒæ¨¡å— -->
    <script type="module">
        // è¿™é‡Œå°†åŒ…å«å®Œæ•´çš„æ¼”ç¤ºé€»è¾‘
        // ç”±äºæ–‡ä»¶é•¿åº¦é™åˆ¶ï¼Œæ¼”ç¤ºé€»è¾‘å°†åœ¨ä¸‹ä¸€ä¸ªæ–‡ä»¶ä¸­å®ç°
        console.log('ğŸš€ QAQæ¸¸æˆå¼•æ“åŸºç¡€3Dåœºæ™¯æ¼”ç¤ºå¼€å§‹åŠ è½½...');
        
        // å…¨å±€å˜é‡
        window.qaqEngine = null;
        window.currentScene = null;
        window.isRendering = false;
        window.stats = {
            frameCount: 0,
            lastTime: Date.now()
        };

        // çŠ¶æ€æ›´æ–°å‡½æ•°
        window.updateStatus = function(message, type = 'info') {
            const statusLog = document.getElementById('statusLog');
            const timestamp = new Date().toLocaleTimeString();
            statusLog.innerHTML += `\n[${timestamp}] ${message}`;
            statusLog.scrollTop = statusLog.scrollHeight;
            
            if (type === 'ready') {
                document.getElementById('engineStatus').innerHTML = 
                    '<span class="status ready">å¼•æ“å°±ç»ª</span>';
            } else if (type === 'error') {
                document.getElementById('engineStatus').innerHTML = 
                    '<span class="status error">é”™è¯¯</span>';
            }
        };

        // å®æ—¶ä¿¡æ¯æ›´æ–°
        window.updateRealTimeInfo = function() {
            const infoPanel = document.getElementById('realTimeInfo');
            if (window.qaqEngine && window.currentScene) {
                const sceneTree = window.qaqEngine.getSceneTree();
                const stats = sceneTree.getStats();
                
                infoPanel.innerHTML = `
å½“å‰åœºæ™¯: ${window.currentScene.name}
åœºæ™¯çŠ¶æ€: ${window.currentScene.state}
åœºæ™¯ç±»å‹: ${window.currentScene.sceneType}
èŠ‚ç‚¹æ•°é‡: ${stats.totalNodes}
åœºæ™¯æ ˆæ·±åº¦: ${stats.stackDepth}
å†…å­˜ä½¿ç”¨: ${(stats.memoryUsage / 1024).toFixed(2)} KB
è¿è¡Œæ—¶é—´: ${(stats.uptime / 1000).toFixed(2)} ç§’
æ¸²æŸ“çŠ¶æ€: ${window.isRendering ? 'è¿è¡Œä¸­' : 'å·²åœæ­¢'}
å¸§æ•°: ${window.stats.frameCount}
                `;
            }
        };

        // å®šæœŸæ›´æ–°å®æ—¶ä¿¡æ¯
        setInterval(window.updateRealTimeInfo, 1000);

        window.updateStatus('HTMLé¡µé¢åŠ è½½å®Œæˆï¼Œå‡†å¤‡åˆå§‹åŒ–å¼•æ“...');
    </script>
    
    <!-- æ¼”ç¤ºé€»è¾‘è„šæœ¬ -->
    <script src="demo.js"></script>
</body>
</html>
