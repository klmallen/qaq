# QAQ ç¼–è¾‘å™¨ç•Œé¢è®¾è®¡åŸå‹

## ğŸ¨ ç¼–è¾‘å™¨ä¸»ç•Œé¢è®¾è®¡

### æ•´ä½“å¸ƒå±€ç»“æ„

```mermaid
graph TB
    subgraph "QAQç¼–è¾‘å™¨ä¸»ç•Œé¢ (1920x1080)"
        subgraph "é¡¶éƒ¨èœå•æ  (é«˜åº¦: 40px)"
            A1[File] --> A2[Edit] --> A3[Project] --> A4[Scene] --> A5[Node] --> A6[Build] --> A7[Debug] --> A8[Help]
            A9[è¿è¡ŒæŒ‰é’®ç»„] --> A10[åœºæ™¯é€‰æ‹©å™¨] --> A11[è®¾ç½®æŒ‰é’®]
        end
        
        subgraph "ä¸»å·¥ä½œåŒºåŸŸ (é«˜åº¦: 960px)"
            subgraph "å·¦ä¾§é¢æ¿ (å®½åº¦: 300px)"
                B1[åœºæ™¯æ ‘ Scene]
                B2[å¯¼å…¥ Import] 
                B3[æ–‡ä»¶ç³»ç»Ÿ FileSystem]
                B4[èŠ‚ç‚¹åº“ NodeLib]
            end
            
            subgraph "ä¸­å¤®è§†å£åŒº (flex-1, çº¦1320px)"
                C1[åœºæ™¯æ ‡ç­¾é¡µåŒºåŸŸ]
                C2[ä¸»è§†å£ (3D/2D)]
                C3[è§†å£å·¥å…·æ ]
                C4[çŠ¶æ€æ ]
            end
            
            subgraph "å³ä¾§é¢æ¿ (å®½åº¦: 300px)"
                D1[æ£€æŸ¥å™¨ Inspector]
                D2[èŠ‚ç‚¹ä¿¡æ¯ Node]
                D3[ç»„ç®¡ç† Groups]
                D4[å†å²è®°å½• History]
            end
        end
        
        subgraph "åº•éƒ¨é¢æ¿ (é«˜åº¦: 200px - å¯æŠ˜å )"
            E1[è¾“å‡º Output] --> E2[è°ƒè¯•å™¨ Debugger] --> E3[åŠ¨ç”» Animation] --> E4[éŸ³é¢‘ Audio] --> E5[ç½‘ç»œ Network]
        end
    end
```

## ğŸ”§ æ ¸å¿ƒé¢æ¿è¯¦ç»†è®¾è®¡

### 1. åœºæ™¯æ ‘é¢æ¿ (SceneTreeDock)

```mermaid
graph TD
    subgraph "åœºæ™¯æ ‘é¢æ¿ (300x600px)"
        A[å·¥å…·æ åŒºåŸŸ 40px]
        A --> A1[æ·»åŠ èŠ‚ç‚¹ +]
        A --> A2[åˆ é™¤èŠ‚ç‚¹ -]
        A --> A3[è¿æ¥èŠ‚ç‚¹ ğŸ”—]
        A --> A4[æ›´å¤šé€‰é¡¹ â‹¯]
        
        B[æœç´¢æ  32px]
        B --> B1[ğŸ” æœç´¢èŠ‚ç‚¹...]
        
        C[èŠ‚ç‚¹æ ‘åŒºåŸŸ flex-1]
        C --> C1[ğŸ“ Main Scene]
        C1 --> C2[ğŸ® Player Node2D]
        C2 --> C3[ğŸ–¼ï¸ Sprite2D]
        C2 --> C4[âš¡ CollisionShape2D]
        C1 --> C5[ğŸŒ World Node2D]
        C5 --> C6[ğŸ  Background]
        C5 --> C7[ğŸ¯ Enemies]
        
        D[çŠ¶æ€æ  24px]
        D --> D1[èŠ‚ç‚¹æ•°: 7]
        D --> D2[é€‰ä¸­: Player]
    end
```

#### åœºæ™¯æ ‘äº¤äº’åŠŸèƒ½
- **èŠ‚ç‚¹é€‰æ‹©**: å•å‡»é€‰ä¸­ï¼ŒCtrl+å•å‡»å¤šé€‰ï¼ŒShift+å•å‡»èŒƒå›´é€‰æ‹©
- **èŠ‚ç‚¹æ‹–æ‹½**: æ‹–æ‹½é‡æ–°æ’åˆ—èŠ‚ç‚¹å±‚æ¬¡ç»“æ„
- **å³é”®èœå•**: 
  - æ·»åŠ å­èŠ‚ç‚¹
  - å¤åˆ¶/ç²˜è´´èŠ‚ç‚¹
  - åˆ é™¤èŠ‚ç‚¹
  - é‡å‘½åèŠ‚ç‚¹
  - æ›´æ”¹èŠ‚ç‚¹ç±»å‹
  - è®¾ä¸ºä¸»åœºæ™¯
- **èŠ‚ç‚¹å›¾æ ‡**: æ ¹æ®èŠ‚ç‚¹ç±»å‹æ˜¾ç¤ºå¯¹åº”å›¾æ ‡å’Œé¢œè‰²
- **èŠ‚ç‚¹çŠ¶æ€**: æ˜¾ç¤ºèŠ‚ç‚¹çš„å¯è§æ€§ã€é”å®šçŠ¶æ€ç­‰

### 2. å±æ€§æ£€æŸ¥å™¨é¢æ¿ (InspectorDock)

```mermaid
graph TD
    subgraph "æ£€æŸ¥å™¨é¢æ¿ (300x800px)"
        A[èŠ‚ç‚¹ä¿¡æ¯åŒº 60px]
        A --> A1[èŠ‚ç‚¹åç§°: Player]
        A --> A2[èŠ‚ç‚¹ç±»å‹: Node2D]
        A --> A3[èŠ‚ç‚¹ID: #12345]
        
        B[å±æ€§æœç´¢ 32px]
        B --> B1[ğŸ” æœç´¢å±æ€§...]
        
        C[å±æ€§åˆ†ç»„åŒºåŸŸ flex-1]
        C --> C1[ğŸ“ Transform]
        C1 --> C11[Position: Vector2(0, 0)]
        C1 --> C12[Rotation: 0Â°]
        C1 --> C13[Scale: Vector2(1, 1)]
        
        C --> C2[ğŸ¨ CanvasItem]
        C2 --> C21[Visible: âœ“]
        C2 --> C22[Modulate: Color(1,1,1,1)]
        C2 --> C23[Z Index: 0]
        
        C --> C3[ğŸ·ï¸ Node]
        C3 --> C31[Name: Player]
        C3 --> C32[Process Mode: Inherit]
        C3 --> C33[Groups: [player, entity]]
        
        D[æ“ä½œæŒ‰é’®åŒº 40px]
        D --> D1[é‡ç½®å±æ€§]
        D --> D2[å¤åˆ¶å±æ€§]
        D --> D3[ç²˜è´´å±æ€§]
    end
```

#### å±æ€§ç¼–è¾‘å™¨ç±»å‹
- **Boolean**: å¤é€‰æ¡†
- **Number**: æ•°å­—è¾“å…¥æ¡†ï¼Œæ”¯æŒæ‹–æ‹½è°ƒæ•´
- **String**: æ–‡æœ¬è¾“å…¥æ¡†
- **Vector2/Vector3**: å¤šä¸ªæ•°å­—è¾“å…¥æ¡†ç»„åˆ
- **Color**: é¢œè‰²é€‰æ‹©å™¨
- **Enum**: ä¸‹æ‹‰é€‰æ‹©æ¡†
- **Resource**: èµ„æºé€‰æ‹©å™¨ï¼Œæ”¯æŒæ‹–æ‹½
- **Array**: å¯å±•å¼€çš„æ•°ç»„ç¼–è¾‘å™¨

### 3. æ–‡ä»¶ç³»ç»Ÿé¢æ¿ (FileSystemDock)

```mermaid
graph TD
    subgraph "æ–‡ä»¶ç³»ç»Ÿé¢æ¿ (300x600px)"
        A[å·¥å…·æ åŒºåŸŸ 40px]
        A --> A1[åˆ·æ–° ğŸ”„]
        A --> A2[æ–°å»ºæ–‡ä»¶å¤¹ ğŸ“+]
        A --> A3[å¯¼å…¥æ–‡ä»¶ ğŸ“¥]
        A --> A4[è§†å›¾æ¨¡å¼ ğŸ“‹/ğŸ–¼ï¸]
        
        B[è·¯å¾„å¯¼èˆª 32px]
        B --> B1[res:// > scenes > ]
        
        C[æ–‡ä»¶è¿‡æ»¤ 32px]
        C --> C1[ğŸ” æœç´¢æ–‡ä»¶...]
        C --> C2[è¿‡æ»¤å™¨ ğŸ”½]
        
        D[æ–‡ä»¶åˆ—è¡¨åŒºåŸŸ flex-1]
        D --> D1[ğŸ“ scenes/]
        D --> D2[ğŸ“ scripts/]
        D --> D3[ğŸ“ assets/]
        D --> D4[ğŸ¬ Main.tscn]
        D --> D5[ğŸ® Player.tscn]
        D --> D6[ğŸ“œ Player.gd]
        D --> D7[ğŸ–¼ï¸ player_sprite.png]
        
        E[çŠ¶æ€æ  24px]
        E --> E1[æ–‡ä»¶æ•°: 156]
        E --> E2[å¤§å°: 45.2MB]
    end
```

#### æ–‡ä»¶ç³»ç»ŸåŠŸèƒ½
- **æ–‡ä»¶ç±»å‹å›¾æ ‡**: æ ¹æ®æ–‡ä»¶æ‰©å±•åæ˜¾ç¤ºå¯¹åº”å›¾æ ‡
- **æ–‡ä»¶é¢„è§ˆ**: é¼ æ ‡æ‚¬åœæ˜¾ç¤ºæ–‡ä»¶é¢„è§ˆ
- **æ‹–æ‹½æ“ä½œ**: æ”¯æŒæ–‡ä»¶æ‹–æ‹½åˆ°åœºæ™¯æˆ–å…¶ä»–é¢æ¿
- **å³é”®èœå•**:
  - æ–°å»ºæ–‡ä»¶/æ–‡ä»¶å¤¹
  - é‡å‘½å
  - åˆ é™¤
  - å¤åˆ¶è·¯å¾„
  - åœ¨èµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤º
  - é‡æ–°å¯¼å…¥
- **æ–‡ä»¶çŠ¶æ€**: æ˜¾ç¤ºæ–‡ä»¶çš„å¯¼å…¥çŠ¶æ€ã€ä¿®æ”¹çŠ¶æ€ç­‰

### 4. ä¸­å¤®è§†å£åŒºåŸŸè®¾è®¡

```mermaid
graph TD
    subgraph "ä¸­å¤®è§†å£åŒºåŸŸ (1320x960px)"
        A[åœºæ™¯æ ‡ç­¾æ  32px]
        A --> A1[Main.tscn Ã—]
        A --> A2[Player.tscn Ã—]
        A --> A3[+ æ–°å»ºåœºæ™¯]
        
        B[è§†å£å·¥å…·æ  40px]
        B --> B1[é€‰æ‹©å·¥å…· ğŸ”˜]
        B --> B2[ç§»åŠ¨å·¥å…· â†”ï¸]
        B --> B3[æ—‹è½¬å·¥å…· ğŸ”„]
        B --> B4[ç¼©æ”¾å·¥å…· â¤¢]
        B --> B5[|]
        B --> B6[2D/3Dåˆ‡æ¢]
        B --> B7[ç½‘æ ¼æ˜¾ç¤º #]
        B --> B8[æ•æ‰ ğŸ§²]
        
        C[ä¸»è§†å£åŒºåŸŸ flex-1]
        C --> C1[3Dåœºæ™¯æ¸²æŸ“åŒºåŸŸ]
        C1 --> C11[ç›¸æœºæ§åˆ¶æç¤º]
        C1 --> C12[åæ ‡è½´æŒ‡ç¤ºå™¨]
        C1 --> C13[é€‰ä¸­å¯¹è±¡é«˜äº®]
        C1 --> C14[å˜æ¢Gizmo]
        
        D[è§†å£çŠ¶æ€æ  24px]
        D --> D1[FPS: 60]
        D --> D2[Objects: 156]
        D --> D3[Vertices: 2.1K]
        D --> D4[ç›¸æœºä½ç½®: (0,0,5)]
    end
```

#### è§†å£äº¤äº’åŠŸèƒ½
- **ç›¸æœºæ§åˆ¶**:
  - é¼ æ ‡ä¸­é”®: å¹³ç§»
  - é¼ æ ‡å³é”®: æ—‹è½¬
  - æ»šè½®: ç¼©æ”¾
  - Fé”®: èšç„¦åˆ°é€‰ä¸­å¯¹è±¡
- **å¯¹è±¡é€‰æ‹©**:
  - å•å‡»é€‰æ‹©
  - æ¡†é€‰å¤šé€‰
  - Ctrl+å•å‡»åˆ‡æ¢é€‰æ‹©
- **å˜æ¢å·¥å…·**:
  - ç§»åŠ¨Gizmo: XYZè½´å‘ç§»åŠ¨
  - æ—‹è½¬Gizmo: ç»•è½´æ—‹è½¬
  - ç¼©æ”¾Gizmo: ç­‰æ¯”æˆ–åˆ†è½´ç¼©æ”¾

## ğŸ¯ ç”¨æˆ·äº¤äº’æµç¨‹è®¾è®¡

### é¡¹ç›®åˆ›å»ºæµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant PM as é¡¹ç›®ç®¡ç†å™¨
    participant FS as æ–‡ä»¶ç³»ç»Ÿ
    participant ED as ç¼–è¾‘å™¨
    
    U->>PM: ç‚¹å‡»"æ–°å»ºé¡¹ç›®"
    PM->>U: æ˜¾ç¤ºé¡¹ç›®åˆ›å»ºå¯¹è¯æ¡†
    U->>PM: å¡«å†™é¡¹ç›®ä¿¡æ¯
    PM->>PM: éªŒè¯é¡¹ç›®ä¿¡æ¯
    PM->>FS: åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
    FS->>PM: ç›®å½•åˆ›å»ºå®Œæˆ
    PM->>FS: ç”Ÿæˆproject.qaqé…ç½®æ–‡ä»¶
    PM->>ED: åˆå§‹åŒ–ç¼–è¾‘å™¨çŠ¶æ€
    ED->>U: æ˜¾ç¤ºç¼–è¾‘å™¨ä¸»ç•Œé¢
```

### åœºæ™¯ç¼–è¾‘æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant ST as åœºæ™¯æ ‘
    participant VP as è§†å£
    participant IN as æ£€æŸ¥å™¨
    
    U->>ST: é€‰æ‹©èŠ‚ç‚¹
    ST->>VP: é«˜äº®æ˜¾ç¤ºèŠ‚ç‚¹
    ST->>IN: æ˜¾ç¤ºèŠ‚ç‚¹å±æ€§
    U->>IN: ä¿®æ”¹å±æ€§å€¼
    IN->>VP: æ›´æ–°è§†å£æ˜¾ç¤º
    IN->>ST: æ›´æ–°èŠ‚ç‚¹çŠ¶æ€
    U->>VP: ä½¿ç”¨å˜æ¢å·¥å…·
    VP->>IN: æ›´æ–°å±æ€§å€¼
    VP->>ST: æ›´æ–°èŠ‚ç‚¹çŠ¶æ€
```

## ğŸ“± å“åº”å¼è®¾è®¡é€‚é…

### ä¸åŒå±å¹•å°ºå¯¸é€‚é…

```mermaid
graph LR
    subgraph "å¤§å±å¹• (>1920px)"
        A1[å·¦é¢æ¿ 350px]
        A2[ä¸­å¤®åŒºåŸŸ flex-1]
        A3[å³é¢æ¿ 350px]
    end
    
    subgraph "æ ‡å‡†å±å¹• (1920px)"
        B1[å·¦é¢æ¿ 300px]
        B2[ä¸­å¤®åŒºåŸŸ flex-1]
        B3[å³é¢æ¿ 300px]
    end
    
    subgraph "å°å±å¹• (1366px)"
        C1[å·¦é¢æ¿ 250px]
        C2[ä¸­å¤®åŒºåŸŸ flex-1]
        C3[å³é¢æ¿ 250px]
    end
    
    subgraph "å¹³æ¿ (<1024px)"
        D1[é¢æ¿å¯æŠ˜å ]
        D2[ä¸­å¤®åŒºåŸŸä¼˜å…ˆ]
        D3[æµ®åŠ¨é¢æ¿]
    end
```

### é¢æ¿è‡ªé€‚åº”è§„åˆ™
- **æœ€å°å®½åº¦**: å·¦å³é¢æ¿æœ€å°200px
- **æŠ˜å é˜ˆå€¼**: å±å¹•å®½åº¦<1024pxæ—¶é¢æ¿å¯æŠ˜å 
- **ä¼˜å…ˆçº§**: ä¸­å¤®è§†å£ > æ£€æŸ¥å™¨ > åœºæ™¯æ ‘ > æ–‡ä»¶ç³»ç»Ÿ
- **è®°å¿†åŠŸèƒ½**: ä¿å­˜ç”¨æˆ·çš„é¢æ¿å¸ƒå±€åå¥½

## ğŸ¨ ä¸»é¢˜å’Œæ ·å¼è®¾è®¡

### é¢œè‰²æ–¹æ¡ˆ

#### æ·±è‰²ä¸»é¢˜ (é»˜è®¤)
```css
:root {
  --bg-primary: #2b2b2b;      /* ä¸»èƒŒæ™¯ */
  --bg-secondary: #3c3c3c;    /* é¢æ¿èƒŒæ™¯ */
  --bg-tertiary: #4a4a4a;     /* å·¥å…·æ èƒŒæ™¯ */
  --text-primary: #ffffff;     /* ä¸»æ–‡æœ¬ */
  --text-secondary: #cccccc;   /* æ¬¡è¦æ–‡æœ¬ */
  --text-muted: #999999;       /* ç¦ç”¨æ–‡æœ¬ */
  --border: #555555;           /* è¾¹æ¡†é¢œè‰² */
  --accent: #4a9eff;           /* å¼ºè°ƒè‰² */
  --success: #4caf50;          /* æˆåŠŸè‰² */
  --warning: #ff9800;          /* è­¦å‘Šè‰² */
  --error: #f44336;            /* é”™è¯¯è‰² */
}
```

#### æµ…è‰²ä¸»é¢˜
```css
:root[data-theme="light"] {
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --bg-tertiary: #eeeeee;
  --text-primary: #333333;
  --text-secondary: #666666;
  --text-muted: #999999;
  --border: #dddddd;
  --accent: #2196f3;
  --success: #4caf50;
  --warning: #ff9800;
  --error: #f44336;
}
```

### èŠ‚ç‚¹ç±»å‹é¢œè‰²ç¼–ç 
- **Node**: `#ffffff` (ç™½è‰²)
- **Node2D**: `#8da5f3` (è“è‰²)
- **Node3D**: `#fc7f7f` (çº¢è‰²)
- **Control**: `#a5efac` (ç»¿è‰²)
- **CanvasItem**: `#8da5f3` (è“è‰²)
- **RigidBody**: `#f77070` (æ©™çº¢è‰²)
- **Area**: `#7582d1` (ç´«è“è‰²)
- **AudioStreamPlayer**: `#eac968` (é»„è‰²)
- **AnimationPlayer**: `#eac968` (é»„è‰²)

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### ç»„ä»¶æ¶æ„
```
EditorLayout
â”œâ”€â”€ EditorMenuBar
â”œâ”€â”€ EditorMainArea
â”‚   â”œâ”€â”€ LeftPanelContainer
â”‚   â”‚   â”œâ”€â”€ SceneTreeDock
â”‚   â”‚   â”œâ”€â”€ FileSystemDock
â”‚   â”‚   â””â”€â”€ ImportDock
â”‚   â”œâ”€â”€ CenterViewportArea
â”‚   â”‚   â”œâ”€â”€ SceneTabBar
â”‚   â”‚   â”œâ”€â”€ ViewportToolbar
â”‚   â”‚   â”œâ”€â”€ EditorViewport3D
â”‚   â”‚   â””â”€â”€ ViewportStatusBar
â”‚   â””â”€â”€ RightPanelContainer
â”‚       â”œâ”€â”€ InspectorDock
â”‚       â”œâ”€â”€ NodeDock
â”‚       â””â”€â”€ GroupsDock
â””â”€â”€ BottomPanelContainer
    â”œâ”€â”€ OutputDock
    â”œâ”€â”€ DebuggerDock
    â””â”€â”€ AnimationDock
```

### çŠ¶æ€ç®¡ç†ç»“æ„
```typescript
// ç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†
interface EditorState {
  layout: {
    leftPanel: { width: number, visible: boolean, activeTab: string }
    rightPanel: { width: number, visible: boolean, activeTab: string }
    bottomPanel: { height: number, visible: boolean, activeTab: string }
  }
  viewport: {
    mode: '2D' | '3D'
    tool: 'select' | 'move' | 'rotate' | 'scale'
    camera: CameraState
    grid: GridState
  }
  selection: {
    nodes: string[]
    lastSelected: string | null
  }
  scenes: {
    openScenes: SceneTab[]
    currentScene: string | null
  }
}
```

è¿™ä¸ªè®¾è®¡æä¾›äº†å®Œæ•´çš„ç¼–è¾‘å™¨ç•Œé¢åŸå‹ï¼ŒåŒ…å«äº†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½çš„è¯¦ç»†äº¤äº’è®¾è®¡å’ŒæŠ€æœ¯å®ç°è¦ç‚¹ã€‚
